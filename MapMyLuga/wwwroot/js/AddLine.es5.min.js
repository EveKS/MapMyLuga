"use strict";function AddPolygons(){function f(){var n=document.forms.markerMessageFormLine;n.reset();$("#getLineInfo").modal("hide")}function t(n,t){this.div_=document.createElement("div");this.div_.className=n;this.div_.innerHTML=t;var i=this;google.maps.event.addDomListener(this.div_,"click",function(){i.removeVertex()})}function u(){n=new google.maps.Polyline({strokeColor:"#555555",strokeOpacity:.8,strokeWeight:3,editable:!0});n.setMap(map);r=google.maps.event.addListener(n,"click",function(t){t.vertex!=undefined&&(e.open(map,n.getPath(),t.vertex,n),o.open(map,n.getPath(),t.vertex),i=!1)})}function s(){var t=n.getPath().getArray();$("#getLineInfo").modal("show");$("#MarcerCoordinateLine").val(t);$("#MarcerCoordinateLine").hide();$("#submitLine").on("click",function(t){t.preventDefault();t.stopPropagation();var i,r,u,f,e;i=new FormData;r=$("#UploadedFilesLine");$.each(r.prop("files"),function(n,t){t.type.match(/(.png)|(.jpeg)|(.jpg)|(.gif)$/i)&&i.append("UploadedFiles",t)});u=$(this).closest("form");f=u.serializeArray();$.each(f,function(n,t){i.append(t.name,t.value)});e=new Date;i.append("DataAdd",e);h(i,n)})}function h(n,t){var i=$("#submitLine");i.button("loading");$.ajax({type:"POST",url:"/Home/SetLine",contentType:!1,processData:!1,data:n,dataType:"json",success:function(n){typeof n.error=="undefined"?n!==""&&($("#colorpickerLine>li>span").css("border","1px solid #ddd"),addLine(n.messageId,n.title,"",t.getPath(),n.objectColor),google.maps.event.removeListener(r),$("#submitLine").unbind(),t.setMap(null),t=null,f(),u()):console.log(n.error)},error:function(n,t){console.log(t)}}).always(function(){i.button("reset")})}var n;t.prototype=new google.maps.OverlayView;t.prototype.onAdd=function(){var n=this,t=this.getMap();this.getPanes().floatPane.appendChild(this.div_);this.divListener_=google.maps.event.addDomListener(t.getDiv(),"click",function(t){t.target!=n.div_&&n.close()},!1)};t.prototype.onRemove=function(){google.maps.event.removeListener(this.divListener_);this.div_.parentNode.removeChild(this.div_);this.set("position");this.set("path");this.set("vertex")};t.prototype.close=function(){this.setMap(null);return};t.prototype.draw=function(){var t=this.get("position"),i=this.getProjection(),n;t&&i&&(n=i.fromLatLngToDivPixel(t),this.div_.style.top=n.y+"px",this.div_.style.left=n.x+"px")};t.prototype.open=function(n,t,i,r){this.set("position",t.getAt(i));this.set("path",t);this.set("vertex",i);this.set("poly",r);this.setMap(n);this.draw()};t.prototype.removeVertex=function(){var n=this.get("path"),t=this.get("vertex"),i=this;n&&t!=undefined||this.close();this.get("poly")?s():n.removeAt(t);this.close()};var r,i=!0,e=new t("delete-menu delete-menu-left",'<i class="fa fa-check" aria-hidden="true"><\/i>'),o=new t("delete-menu delete-menu-right",'<i class="fa fa-times" aria-hidden="true"><\/i>');u();google.maps.event.addListener(map,"click",function(t){var r,u;$("#click-onoff").is(".clicable")&&(r=t.latLng,$("#getInfo").modal("show"),$("#MarcerCoordinate").val(r),$("#MarcerCoordinate").hide());$("#click-line").is(".clicable")&&i&&(u=n.getPath(),u.push(t.latLng));i=!0})}function addLine(n,t,i,r,u){var f="#555555",e;typeof u!==undefined&&u!==null&&u!==""&&u!=="undefined"&&(f=u);polygons[n]=new google.maps.Polyline({strokeColor:f,strokeOpacity:.8,strokeWeight:4,id:n,title:t});r?polygons[n].setPath(r):(e=polygons[n].getPath(),$.each(i,function(n,t){e.push(new google.maps.LatLng(t.latitude,t.longitude))}));polygons[n].setMap(map);polygons[n].addListener("click",function(){getPanelContent(polygons[n].id)})}var polygons={},isClicable=[];